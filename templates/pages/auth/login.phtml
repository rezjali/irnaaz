<?php
// Fetch settings for layout elements like favicon and background
$settingModel = new \App\Models\Setting();
$settings = $settingModel->getAllAsAssoc();
?>
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ورود به پنل مدیریت</title>
    <?php if (!empty($settings['site_favicon_url'])): ?>
        <link rel="icon" type="image/png" href="<?php echo APP_URL . '/' . e($settings['site_favicon_url']); ?>">
    <?php endif; ?>
    
    <!-- Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Vazirmatn -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Dynamic Stylesheet for background image -->
    <link rel="stylesheet" href="<?php echo APP_URL; ?>/dynamic_style.php">
    
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen login-page">
    <div class="w-full max-w-md">
        <form action="<?php echo APP_URL; ?>/login" method="POST" class="bg-white bg-opacity-90 shadow-lg rounded-xl px-8 pt-6 pb-8 mb-4">
            <div class="mb-8 text-center">
                <h1 class="text-3xl font-bold text-gray-800">ورود به پنل</h1>
                <p class="text-gray-500 mt-2">برای ادامه وارد حساب کاربری خود شوید</p>
            </div>
            
            <!-- Display Flash Message for login errors -->
            <?php display_flash_message('error'); ?>

            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2 text-right" for="username">
                    نام کاربری یا ایمیل
                </label>
                <input class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" 
                       id="username" name="username" type="text" placeholder="نام کاربری خود را وارد کنید" required>
            </div>
            <div class="mb-6">
                <label class="block text-gray-700 text-sm font-bold mb-2 text-right" for="password">
                    رمز عبور
                </label>
                <input class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" 
                       id="password" name="password" type="password" placeholder="رمز عبور خود را وارد کنید" required>
            </div>
            <div class="flex items-center justify-between">
                <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:shadow-outline w-full" type="submit">
                    ورود
                </button>
            </div>
        </form>
        <p class="text-center text-gray-500 text-xs">
            © <?php echo jdate('Y'); ?> Iraaz Panel. All rights reserved.
        </p>
    </div>
</body>
</html>
