<div class="bg-white p-6 rounded-xl shadow-md max-w-2xl mx-auto">
    <h2 class="text-xl font-semibold mb-6 border-b pb-4">اختصاص اعتبار دستی</h2>

    <form action="<?php echo APP_URL; ?>/financial/store-credit" method="POST">
        <div class="space-y-6">
            <!-- Customer Selection -->
            <div>
                <label for="user_id" class="block text-sm font-medium text-gray-700 mb-1">انتخاب کاربر</label>
                <select name="user_id" id="user_id" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">یک کاربر را انتخاب کنید</option>
                    <?php foreach ($customers as $customer): ?>
                        <option value="<?php echo e($customer->id); ?>" <?php echo ($preselected_user_id == $customer->id) ? 'selected' : ''; ?>>
                            <?php echo e($customer->full_name); ?> (<?php echo e($customer->username); ?>)
                        </option>
                    <?php endforeach; ?>
                </select>
            </div>

            <!-- Amount -->
            <div>
                <label for="amount" class="block text-sm font-medium text-gray-700 mb-1">مبلغ (تومان)</label>
                <input type="number" step="any" name="amount" id="amount" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="برای کسر اعتبار عدد منفی وارد کنید">
            </div>

            <!-- Wallet Type -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">نوع کیف پول</label>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <label class="flex items-center">
                        <input type="radio" name="wallet_type" value="product" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                        <span class="mr-2 text-gray-700">کیف پول کالا</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="wallet_type" value="shipping" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <span class="mr-2 text-gray-700">کیف پول باربری</span>
                    </label>
                </div>
            </div>

            <!-- Description -->
            <div>
                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">توضیحات</label>
                <input type="text" name="description" id="description"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="مثال: پاداش خرید اول">
            </div>
        </div>

        <!-- Form Actions -->
        <div class="mt-8 pt-5 border-t">
            <div class="flex justify-end">
                <a href="<?php echo APP_URL; ?>/financial" class="bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-300 ml-4">انصراف</a>
                <button type="submit" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:shadow-outline">
                    ثبت تراکنش
                </button>
            </div>
        </div>
    </form>
</div>
