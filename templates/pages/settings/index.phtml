<div class="bg-white p-6 rounded-xl shadow-md max-w-4xl mx-auto" x-data="{ activeTab: 'general' }">
    <h2 class="text-xl font-semibold mb-4">تنظیمات سایت و برندینگ</h2>

    <!-- Tab Buttons -->
    <div class="border-b border-gray-200">
        <nav class="-mb-px flex space-x-4 space-x-reverse" aria-label="Tabs">
            <button @click="activeTab = 'general'" :class="{'border-blue-500 text-blue-600': activeTab === 'general', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'general'}" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                عمومی
            </button>
            <button @click="activeTab = 'branding'" :class="{'border-blue-500 text-blue-600': activeTab === 'branding', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'branding'}" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                برندینگ
            </button>
            <button @click="activeTab = 'appearance'" :class="{'border-blue-500 text-blue-600': activeTab === 'appearance', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'appearance'}" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                ظاهر پنل
            </button>
        </nav>
    </div>

    <?php display_flash_message('success'); ?>

    <form action="<?php echo APP_URL; ?>/settings/update" method="POST" enctype="multipart/form-data" class="mt-6">
        <!-- General Settings Tab -->
        <div x-show="activeTab === 'general'" class="space-y-6">
            <div>
                <label for="site_name" class="block text-sm font-medium text-gray-700 mb-1">نام سایت</label>
                <input type="text" name="site_name" id="site_name" class="w-full px-4 py-2 border rounded-lg" value="<?php echo e($settings['site_name'] ?? ''); ?>">
            </div>
            <div>
                <label for="site_url" class="block text-sm font-medium text-gray-700 mb-1">آدرس سایت (URL)</label>
                <input type="text" name="site_url" id="site_url" dir="ltr" class="w-full px-4 py-2 border rounded-lg" value="<?php echo e($settings['site_url'] ?? ''); ?>">
            </div>
        </div>

        <!-- Branding Tab -->
        <div x-show="activeTab === 'branding'" class="space-y-8">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">لوگوی سایت</label>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <?php if (!empty($settings['site_logo_url'])): ?><img src="<?php echo APP_URL . '/' . e($settings['site_logo_url']); ?>" class="h-12 border p-1 rounded-md"><?php endif; ?>
                    <input type="file" name="site_logo" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">فاویکن (Favicon)</label>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <?php if (!empty($settings['site_favicon_url'])): ?><img src="<?php echo APP_URL . '/' . e($settings['site_favicon_url']); ?>" class="h-8 w-8 border p-1 rounded-md"><?php endif; ?>
                    <input type="file" name="site_favicon" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">تصویر پس‌زمینه صفحه ورود</label>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <?php if (!empty($settings['login_bg_url'])): ?><img src="<?php echo APP_URL . '/' . e($settings['login_bg_url']); ?>" class="h-16 border p-1 rounded-md"><?php endif; ?>
                    <input type="file" name="login_bg" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
            </div>
        </div>

        <!-- Appearance Tab -->
        <div x-show="activeTab === 'appearance'" class="space-y-8">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">رنگ‌بندی پنل</label>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div class="flex items-center"><input type="color" name="theme_primary_color" value="<?php echo e($settings['theme_primary_color'] ?? '#0d6efd'); ?>" class="w-10 h-10"><label class="mr-3">رنگ اصلی</label></div>
                    <div class="flex items-center"><input type="color" name="theme_sidebar_bg" value="<?php echo e($settings['theme_sidebar_bg'] ?? '#212529'); ?>" class="w-10 h-10"><label class="mr-3">پس‌زمینه سایدبار</label></div>
                    <div class="flex items-center"><input type="color" name="theme_sidebar_text" value="<?php echo e($settings['theme_sidebar_text'] ?? '#adb5bd'); ?>" class="w-10 h-10"><label class="mr-3">متن سایدبار</label></div>
                    <div class="flex items-center"><input type="color" name="theme_body_bg" value="<?php echo e($settings['theme_body_bg'] ?? '#f8f9fa'); ?>" class="w-10 h-10"><label class="mr-3">پس‌زمینه بدنه</label></div>
                    <div class="flex items-center"><input type="color" name="theme_card_bg" value="<?php echo e($settings['theme_card_bg'] ?? '#ffffff'); ?>" class="w-10 h-10"><label class="mr-3">پس‌زمینه کارت‌ها</label></div>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="mt-8 pt-5 border-t">
            <div class="flex justify-end">
                <button type="submit" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">ذخیره تغییرات</button>
            </div>
        </div>
    </form>
</div>
